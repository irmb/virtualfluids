BootStrap: docker
From: ubuntu:20.04

%files
    Python Python
    dist dist


%post
    export DEBIAN_FRONTEND=noninteractive
    apt-get update &&          \
    apt-get install -y         \
    build-essential            \
    cmake=3.16.3-1ubuntu1      \
    python3                    \
    python3-dev                \
    python3-pip                \
    mpich                      \
    libomp-dev

    pip3 install setuptools wheel $(find dist/*.whl)

%environment
    export PYTHONPATH=/Python

%runscript
    python3 /Python/liddrivencavity/simulation.py

%appenv poiseuille
    export PYTHONPATH=Python

%apprun poisueille
    python3 /Python/poiseuille/poiseuille_hpc.py

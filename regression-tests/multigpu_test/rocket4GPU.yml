host: $PHOENIX_REMOTE_HOST
user: $PHOENIX_REMOTE_USER
private_keyfile: $PHOENIX_PRIVATE_KEY

copy:
  - from: regression-tests/multigpu_test/slurm4GPU.job
    to: multigpu_test/slurm4GPU.job
    overwrite: true

  - from: "CMake/"
    to: "multigpu_test/CMake/"
    overwrite: true

  - from: "3rdParty/"
    to: "multigpu_test/3rdParty/"
    overwrite: true

  - from: "CMakeLists.txt"
    to: "multigpu_test/CMakeLists.txt"
    overwrite: true

  - from: "gpu.cmake"
    to: "multigpu_test/gpu.cmake"
    overwrite: true

  - from: "src/"
    to: "multigpu_test/src/"
    overwrite: true

  - from: "CMakePresets.json"
    to: "multigpu_test/CMakePresets.json"
    overwrite: true

  - from: "apps/gpu/LBM/"
    to: "multigpu_test/apps/gpu/LBM/"
    overwrite: true

collect:
  - from: multigpu_test/output/4GPU/
    to: output/4GPU/
    overwrite: true

  - from: multigpu_test/slurm4GPU.out
    to: output/4GPU/slurm4GPU.out
    overwrite: true

clean:
  - multigpu_test/*

sbatch: multigpu_test/slurm4GPU.job
continue_if_job_fails: true

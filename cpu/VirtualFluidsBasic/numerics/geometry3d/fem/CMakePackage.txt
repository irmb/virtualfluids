SET(SUBDIRPATH numerics/geometry3d/fem) 
SET(OPTION_LABEL BUILD_GEO3D_FEM)

SET(CURRENT_DIR ${SOURCE_ROOT}/${SUBDIRPATH})

OPTION(${OPTION_LABEL} "${CURRENT_DIR}" ON)
IF(${OPTION_LABEL})
  SET(TEMP_FILES "") 
  FILE(GLOB HEADER_FILES ${CURRENT_DIR}/*.h  )
  FILE(GLOB CPP_FILES    ${CURRENT_DIR}/*.cpp)
  

  SET(TEMPO_FILES ${HEADER_FILES} ${CPP_FILES})
  IF(NOT ADHOC)
    FILE(GLOB ADHOC_FILES ${CURRENT_DIR}/*Adhoc* )
    REMOVE(TEMPO_FILES ${ADHOC_FILES} )
  ENDIF(NOT ADHOC)

  IF(NOT EIGENVALUE)
    FILE(GLOB EIGENVALUE_FILES ${CURRENT_DIR}/*Eigen* )
    REMOVE(TEMPO_FILES ${EIGENVALUE_FILES} )
  ENDIF(NOT EIGENVALUE)

IF(CAB_PACKAGE_DEFINTIONS)
    SET_SOURCE_FILES_PROPERTIES(${CPP_FILES} PROPERTIES COMPILE_FLAGS ${CAB_PACKAGE_DEFINTIONS})
ENDIF(CAB_PACKAGE_DEFINTIONS)

  SET(ALL_SOURCES ${ALL_SOURCES} ${TEMPO_FILES})
  
  IF(${WITH_SUBFOLDERS_FOR_SG} MATCHES YES)  
    STRING(REGEX REPLACE "/" "\\\\" SG_PATH ${SUBDIRPATH})
    SOURCE_GROUP(${SG_PATH} FILES ${TEMPO_FILES})
  ELSE(${WITH_SUBFOLDERS_FOR_SG} MATCHES YES)
    SOURCE_GROUP(${SUBDIRPATH} FILES ${TEMPO_FILES})
  ENDIF(${WITH_SUBFOLDERS_FOR_SG} MATCHES YES)

ENDIF(${OPTION_LABEL})
